@inherits UmbracoViewPage<BreadcrumbViewModel>
@using Danva.Web.Models.ComponentModels

@{
    var startNode = Model.CurrentPage;
    var siteRoot = startNode.AncestorOrSelf(1);

    var crumbs = new List<IPublishedContent>();
    crumbs.AddRange(startNode.AncestorsOrSelf().Where(p => p.Level > 1).OrderBy(p => p.Level));

    if (crumbs.Any())
    {
        @RenderBreadcrumbs(crumbs, startNode, siteRoot)
    }
}

@helper RenderBreadcrumbs(List<IPublishedContent> breadcrumbs, IPublishedContent startNode, IPublishedContent siteRoot)
{
    <ul class="breadcrumb">
        @if (Model.ShowWebRoot)
        {
            <li class="breadcrumb__svg">
                <a href="@siteRoot.Url">
                    <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg width="100%" height="100%" viewBox="0 0 19 15" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;"><rect id="Moodbord" x="-283" y="-1510" width="1440" height="5704" style="fill:none;"/><path id="fa.-home" d="M16.159,8.64l0,5.612c0,0.202 -0.074,0.378 -0.222,0.526c-0.148,0.148 -0.324,0.222 -0.527,0.222l-4.489,0l0,-4.489l-2.993,0l0,4.489l-4.489,0c-0.203,0 -0.378,-0.074 -0.527,-0.222c-0.148,-0.148 -0.222,-0.324 -0.222,-0.526l0,-5.612c0,-0.008 0.002,-0.02 0.006,-0.035c0.004,-0.016 0.006,-0.027 0.006,-0.035l6.723,-5.542l6.722,5.542c0.008,0.015 0.012,0.039 0.012,0.07Zm2.607,-0.807l-0.725,0.865c-0.062,0.071 -0.144,0.113 -0.245,0.129l-0.036,0c-0.101,0 -0.183,-0.027 -0.245,-0.082l-8.09,-6.746l-8.091,6.746c-0.093,0.062 -0.187,0.09 -0.28,0.082c-0.102,-0.016 -0.184,-0.058 -0.246,-0.129l-0.725,-0.865c-0.062,-0.078 -0.089,-0.169 -0.082,-0.275c0.008,-0.105 0.051,-0.189 0.129,-0.251l8.406,-7.003c0.249,-0.203 0.546,-0.304 0.889,-0.304c0.342,0 0.639,0.101 0.888,0.304l2.853,2.385l0,-2.28c0,-0.109 0.035,-0.199 0.105,-0.269c0.07,-0.07 0.16,-0.105 0.269,-0.105l2.245,0c0.109,0 0.198,0.035 0.269,0.105c0.07,0.07 0.105,0.16 0.105,0.269l0,4.77l2.56,2.128c0.078,0.062 0.121,0.146 0.129,0.251c0.008,0.106 -0.02,0.197 -0.082,0.275Z" style="fill:#cdcdc1;fill-rule:nonzero;"/></svg>
                </a>
            </li>
        }
        @foreach (var crumb in breadcrumbs)
        {
            bool active = crumb.Equals(startNode);
            <li class="@(active ? "active" : string.Empty)">
                @if (active && Model.ShowCurrentPage)
                {
                    <span class="arrow"></span>
                    @crumb.Name
                }
                else
                {
                    <a href="@crumb.Url"><span class="arrow"></span>@crumb.Name</a>
                }
            </li>
        }
    </ul>
}